"use strict";(self.webpackChunkplayground=self.webpackChunkplayground||[]).push([[33306],{3905:(e,r,t)=>{t.d(r,{Zo:()=>p,kt:()=>u});var n=t(67294);function i(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){i(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function s(e,r){if(null==e)return{};var t,n,i=function(e,r){if(null==e)return{};var t,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(i[t]=e[t]);return i}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var c=n.createContext({}),l=function(e){var r=n.useContext(c),t=r;return e&&(t="function"==typeof e?e(r):o(o({},r),e)),t},p=function(e){var r=l(e.components);return n.createElement(c.Provider,{value:r},e.children)},v="mdxType",d={inlineCode:"code",wrapper:function(e){var r=e.children;return n.createElement(n.Fragment,{},r)}},b=n.forwardRef((function(e,r){var t=e.components,i=e.mdxType,a=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),v=l(t),b=i,u=v["".concat(c,".").concat(b)]||v[b]||d[b]||a;return t?n.createElement(u,o(o({ref:r},p),{},{components:t})):n.createElement(u,o({ref:r},p))}));function u(e,r){var t=arguments,i=r&&r.mdxType;if("string"==typeof e||i){var a=t.length,o=new Array(a);o[0]=b;var s={};for(var c in r)hasOwnProperty.call(r,c)&&(s[c]=r[c]);s.originalType=e,s[v]="string"==typeof e?e:i,o[1]=s;for(var l=2;l<a;l++)o[l]=t[l];return n.createElement.apply(null,o)}return n.createElement.apply(null,t)}b.displayName="MDXCreateElement"},62202:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var n=t(87462),i=(t(67294),t(3905));const a={id:"concept-ba52f31c-4b97-4a2a-ba19-11411cb5a7cb",slug:"/create-tests/manage-projects/set-up-projects/web-testing/handle-webdrivers/handle-webdrivers-with-eventfiringwebdriver-in-katalon-studio"},o="Handle WebDrivers with EventFiringWebDriver in Katalon Studio",s={unversionedId:"concept-ba52f31c-4b97-4a2a-ba19-11411cb5a7cb",id:"concept-ba52f31c-4b97-4a2a-ba19-11411cb5a7cb",title:"Handle WebDrivers with EventFiringWebDriver in Katalon Studio",description:"-   Starting in Katalon Studio version 7.0.0, you can use the Selenium-based class EventFiringWebDriver to configure event-driven capabilities related to your WebDrivers for test execution.",source:"@site/docs/concept-ba52f31c-4b97-4a2a-ba19-11411cb5a7cb.mdx",sourceDirName:".",slug:"/create-tests/manage-projects/set-up-projects/web-testing/handle-webdrivers/handle-webdrivers-with-eventfiringwebdriver-in-katalon-studio",permalink:"/create-tests/manage-projects/set-up-projects/web-testing/handle-webdrivers/handle-webdrivers-with-eventfiringwebdriver-in-katalon-studio",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/concept-ba52f31c-4b97-4a2a-ba19-11411cb5a7cb.mdx",tags:[],version:"current",frontMatter:{id:"concept-ba52f31c-4b97-4a2a-ba19-11411cb5a7cb",slug:"/create-tests/manage-projects/set-up-projects/web-testing/handle-webdrivers/handle-webdrivers-with-eventfiringwebdriver-in-katalon-studio"},sidebar:"tutorialSidebar",previous:{title:"Upgrade or Downgrade WebDrivers in Katalon Studio",permalink:"/create-tests/manage-projects/set-up-projects/web-testing/handle-webdrivers/upgrade-or-downgrade-webdrivers-in-katalon-studio"},next:{title:"Internet Explorer Configurations for Katalon Studio",permalink:"/create-tests/manage-projects/set-up-projects/web-testing/internet-explorer-configurations-for-katalon-studio"}},c={},l=[{value:"Use WebDriver Event Listeners",id:"use-webdriver-event-listeners",level:2},{value:"Use RemoteWebDriver",id:"use-remotewebdriver",level:2},{value:"See also",id:"see-also",level:2}],p={toc:l},v="wrapper";function d(e){let{components:r,...t}=e;return(0,i.kt)(v,(0,n.Z)({},p,t,{components:r,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"handle-webdrivers-with-eventfiringwebdriver-in-katalon-studio"},"Handle WebDrivers with EventFiringWebDriver in Katalon Studio"),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("ul",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ul"},"Starting in ",(0,i.kt)("strong",{parentName:"li"},"Katalon Studio version 7.0.0"),", you can use the Selenium-based class ",(0,i.kt)("code",null,"EventFiringWebDriver")," to configure event-driven capabilities related to your WebDrivers for test execution."))),(0,i.kt)("p",null,"This can be used for example when logging steps or triggering certain events before an operation. You can learn more about this class from the Selenium documentation here: ",(0,i.kt)("a",{parentName:"p",href:"https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/support/events/EventFiringWebDriver.html"},"EventFiringWebDriver"),"."),(0,i.kt)("p",null,"In this article, we show you how to handle WebDrivers with the support of ",(0,i.kt)("code",null,"EventFiringWebDriver"),"."),(0,i.kt)("h2",{id:"use-webdriver-event-listeners"},"Use WebDriver Event Listeners"),(0,i.kt)("p",null,"You can use ",(0,i.kt)("code",null,"WebDriverEventListener")," to handle events started by the WebDriver, which happens for example, before or after navigation, before or after a click. If ",(0,i.kt)("code",null,"EventFiringWebDriver")," is a class that wraps around the WebDriver to throw events, ",(0,i.kt)("code",null,"WebDriverEventListeners")," is an interface to catch WebDriver events. You can learn more about this interface from the Selenium documentation here: ",(0,i.kt)("a",{parentName:"p",href:"https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/events/WebDriverEventListener.html"},"WebDriverEventListener")),(0,i.kt)("p",null,"Below is an example use of a custom ",(0,i.kt)("code",null,"WebDriverEventListener"),":"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Create a new package to contain a keyword. Go to ",(0,i.kt)("strong",{parentName:"p"},"File ",">"," New ",">"," Package"),". Here, we name the package ",(0,i.kt)("strong",{parentName:"p"},"customkeyword"),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Create a new keyword to handle WebDriver events."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Go to ",(0,i.kt)("strong",{parentName:"p"},"File ",">"," New ",">"," Keywords"),". A ",(0,i.kt)("strong",{parentName:"p"},"New")," dialog opens.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Click ",(0,i.kt)("strong",{parentName:"p"},"Browse")," to choose a package for your keyword, then manually type the class name. Here, we choose the package created from Step 1 and name the keyword ",(0,i.kt)("strong",{parentName:"p"},"MyCustomWebEventListener"),". Click ",(0,i.kt)("strong",{parentName:"p"},"OK"),". A new keyword page opens."),(0,i.kt)("img",{src:"https://github.com/katalon-studio/docs-images/raw/master/katalon-studio/docs/handle-webdrivers/KS-WEBDRIVER-Choose-package-and-name-the-keyword.png",width:600,alt:"Choose the package and create the keyword"})),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Copy and paste below sample code into the created keyword."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'import org.openqa.selenium.WebDriver\nimport org.openqa.selenium.support.events.AbstractWebDriverEventListener\n\npublic class MyCustomWebEventListener extends AbstractWebDriverEventListener {\n    @Override\n    public void beforeNavigateTo(String url, WebDriver driver) {\n        println "Before navigating to " + url;\n    }\n}\n\n')),(0,i.kt)("img",{src:"https://github.com/katalon-studio/docs-images/raw/master/katalon-studio/docs/handle-webdrivers/KS-WEBDRIVER-final-results-after-creating-the-keyword.png",width:500,alt:"Final results after creating the keyword"})))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Open your test script. To register ",(0,i.kt)("code",null,"MyCustomWebEventListener")," with WebDriver, copy and paste the sample code as below:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"import org.openqa.selenium.WebDriver as WebDriver\nimport org.openqa.selenium.support.events.EventFiringWebDriver as EventFiringWebDriver\n\nimport com.kms.katalon.core.webui.driver.DriverFactory as DriverFactory\nimport com.kms.katalon.core.webui.keyword.WebUiBuiltInKeywords as WebUI\n\nimport customlistener.MyCustomWebEventListener as MyCustomWebEventListener\n\nWebUI.openBrowser('')\n\nWebDriver webdriver = DriverFactory.getWebDriver()\n\nEventFiringWebDriver eventFiring = ((webdriver) as EventFiringWebDriver)\n\neventFiring.register(new MyCustomWebEventListener())\n\nDriverFactory.changeWebDriver(eventFiring)\n\nWebUI.navigateToUrl('www.google.com')\n\nWebUI.closeBrowser()\n\n")),(0,i.kt)("img",{src:"https://github.com/katalon-studio/docs-images/raw/master/katalon-studio/docs/handle-webdrivers/KS-WEBDRIVER-Results-after-registering-custom-keyword.png",width:500,alt:"Final results after registering the keyword"})),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Hit ",(0,i.kt)("strong",{parentName:"p"},"Run"),", then observe the result in the Console log."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'2021-09-13 09:16:21.722 INFO  c.k.k.core.webui.driver.DriverFactory    - sessionId = ebf7a901164241457b656ffece5da9b0\n2021-09-13 09:16:21.747 INFO  c.k.k.core.webui.driver.DriverFactory    - browser = Chrome 93.0.4577.63\n2021-09-13 09:16:21.753 INFO  c.k.k.core.webui.driver.DriverFactory    - platform = Mac OS X\n2021-09-13 09:16:21.754 INFO  c.k.k.core.webui.driver.DriverFactory    - seleniumVersion = 3.141.59\n2021-09-13 09:16:21.773 INFO  c.k.k.core.webui.driver.DriverFactory    - proxyInformation = ProxyInformation { proxyOption=NO_PROXY, proxyServerType=HTTP, username=, password=********, proxyServerAddress=, proxyServerPort=0, executionList="", isApplyToDesiredCapabilities=true }\n2021-09-13 09:16:22.642 DEBUG testcase.WebDriver Event Listeners       - 2: webdriver = getWebDriver()\n2021-09-13 09:16:22.652 DEBUG testcase.WebDriver Event Listeners       - 3: eventFiring = webdriver\n2021-09-13 09:16:22.673 DEBUG testcase.WebDriver Event Listeners       - 4: eventFiring.register(new customlistener.MyCustomWebEventListener())\n2021-09-13 09:16:22.693 DEBUG testcase.WebDriver Event Listeners       - 5: changeWebDriver(eventFiring)\n2021-09-13 09:16:22.699 INFO  c.k.k.core.webui.driver.DriverFactory    - sessionId = ebf7a901164241457b656ffece5da9b0\n2021-09-13 09:16:22.711 INFO  c.k.k.core.webui.driver.DriverFactory    - browser = Chrome 93.0.4577.63\n2021-09-13 09:16:22.711 INFO  c.k.k.core.webui.driver.DriverFactory    - platform = Mac OS X\n2021-09-13 09:16:22.712 INFO  c.k.k.core.webui.driver.DriverFactory    - seleniumVersion = 3.141.59\n2021-09-13 09:16:22.713 INFO  c.k.k.core.webui.driver.DriverFactory    - proxyInformation = ProxyInformation { proxyOption=NO_PROXY, proxyServerType=HTTP, username=, password=********, proxyServerAddress=, proxyServerPort=0, executionList="", isApplyToDesiredCapabilities=true }\n2021-09-13 09:16:22.722 DEBUG testcase.WebDriver Event Listeners       - 6: navigateToUrl("www.google.com")\nBefore navigating to http://www.google.com\n2021-09-13 09:16:23.220 DEBUG testcase.WebDriver Event Listeners       - 7: closeBrowser()\n2021-09-13 09:16:23.243 INFO  c.k.katalon.core.main.TestCaseExecutor   - END Test Cases/WebDriver Event Listeners\n\n')))),(0,i.kt)("h2",{id:"use-remotewebdriver"},"Use RemoteWebDriver"),(0,i.kt)("p",null,"Because ",(0,i.kt)("code",null,"EventFiringWebDriver")," does not implement the interface ",(0,i.kt)("code",null,"RemoteWebDriver"),", to obtain a RemoteWebDriver instance safely, do as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"....\n// Cast Katalon's WebDriver into EventFiringWebDriver\nEventFiringWebDriver eventFiring = (EventFiringWebDriver) DriverFactory.getWebDriver()\n// Get the driver wrapped inside\nWebDriver wrappedWebDriver = eventFiring.getWrappedDriver()\n// Cast the wrapped driver into RemoteWebDriver\nRemoteWebDriver katalonWebDriver = (RemoteWebDriver) wrappedWebDriver\n// Katalon now uses RemoteWebDriver instead of your local driver\n\n")),(0,i.kt)("p",null,"We recommend encapsulating the above logic into a function to avoid code duplication."),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"This is to avoid an exception in the case that your code is casting the WebDriver from DriverFactory, such as with:"),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre"},"....\nRemoteWebDriver katalonWebDriver = (RemoteWebDriver) DriverFactory.getWebDriver()\n\n\n")),(0,i.kt)("p",{parentName:"admonition"},"In this scenario, from Katalon Studio 7.0.0, an exception would appear as below:"),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre"},"Cannot cast object 'com.kms.katalon.core.webui.driver.SmartWaitWebDriver@7cab1508' with class 'com.kms.katalon.core.webui.driver.SmartWaitWebDriver' to class 'org.openqa.selenium.remote.RemoteWebDriver'\n\n")),(0,i.kt)("p",{parentName:"admonition"},"(","From ",(0,i.kt)("a",{parentName:"p",href:"https://forum.katalon.com/t/bug-katalon-v7-cannot-cast-smartwaitwebdriver-to-remotewebdriver/33236"},"Russ Thomas's bug report"),")")),(0,i.kt)("h2",{id:"see-also"},"See also"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/create-tests/manage-projects/set-up-projects/web-testing/handle-webdrivers/upgrade-or-downgrade-webdrivers-in-katalon-studio"},"Update or Downgrade WebDrivers")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/create-tests/manage-projects/set-up-projects/web-testing/handle-webdrivers/terminate-webdrivers-in-katalon-studio"},"Terminate Webdrivers"))))}d.isMDXComponent=!0}}]);